<div class="todo-container">
  <h1 class="title">📝 TodoList</h1>

  <!-- 🔍 Barre de recherche -->
  <input
    type="text"
    [(ngModel)]="searchTerm"
    placeholder="Rechercher une tâche..."
    class="search-input"
  >

  <!-- 🎯 Filtre -->
  <select [(ngModel)]="filter" class="filter-select">
    <option value="all">Toutes</option>
    <option value="completed">Terminées</option>
    <option value="pending">À venir</option>
    <option value="overdue">En retard</option>
  </select>

  <!-- Formulaire ajout -->
  <div class="input-container">
    <input
      [(ngModel)]="newTodo.title"
      (keyup.enter)="addTodo()"
      placeholder="Nouvelle tâche..."
      class="task-input"
    >

    <input
      type="date"
      [(ngModel)]="newTodo.deadline"
      class="date-input"
    >

    <select [(ngModel)]="newTodo.priority" class="priority-select">
      <option value="low">Faible</option>
      <option value="medium">Moyenne</option>
      <option value="high">Haute</option>
    </select>

    <button (click)="addTodo()" class="add-btn">
      ➕ Ajouter
    </button>
  </div>

  <!-- Liste -->
  <ul class="task-list">
    <li
      *ngFor="let todo of getFilteredTodos()"
      [class.completed]="todo.completed"
      [ngClass]="{
        'priority-low': todo.priority === 'low',
        'priority-medium': todo.priority === 'medium',
        'priority-high': todo.priority === 'high',
        'deadline-warning': isDeadlineToday(todo.deadline),
        'deadline-overdue': isDeadlineOverdue(todo.deadline)
      }"
    >
      <label>
        <input
          type="checkbox"
          [(ngModel)]="todo.completed"
          (change)="saveTodos()"
          class="checkbox"
        >
        <span>{{ todo.title }}</span>
        <small *ngIf="todo.deadline">
          📅 {{ todo.deadline | date:'dd/MM/yyyy' }}
        </small>
      </label>
      <button (click)="deleteTodo(todo.id)" class="delete-btn">
        🗑 Supprimer
      </button>
    </li>
  </ul>
</div>
